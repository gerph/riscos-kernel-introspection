/*******************************************************************
 * File:        os
 * Purpose:     OS interfaces
 * Author:      Gerph
 * Date:        28 May 2025
 ******************************************************************/

#include <stdlib.h>
#include "swis.h"

#include "os.h"


/*************************************************** Gerph *********
 Function:      os_claim
 Description:   Claim a vector
 Parameters:    vector = the vector number
                func-> the entry point to call
                pw = the private word
 Returns:       pointer to error, or NULL if claimed ok
 ******************************************************************/
_kernel_oserror *os_claim(int vector, void (*func)(void), void *pw)
{
    _kernel_oserror *err;
    err = _swix(OS_Claim, _INR(0,2),
                          vector, func, pw);
    return err;
}

/*************************************************** Gerph *********
 Function:      os_release
 Description:   Release a vector
 Parameters:    vector = the vector number
                func-> the entry point to call
                pw = the private word
 Returns:       pointer to error, or NULL if claimed ok
 ******************************************************************/
_kernel_oserror *os_release(int vector, void (*func)(void), void *pw)
{
    _kernel_oserror *err;
    err = _swix(OS_Release, _INR(0,2),
                          vector, func, pw);
    return err;
}
